<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>캔버스 리사이즈 테스트</title>
    <style>
        /* 필수 스타일만 포함 */
        body { font-family: sans-serif; padding: 20px; }
        .form-section { border: 2px solid #3f51b5; padding: 20px; margin-bottom: 20px; border-radius: 8px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        .signature-pad-container { position: relative; border: 1px solid #ccc; border-radius: 6px; }
        canvas {
            width: 100%; /* 보이는 너비를 100%로 설정 */
            height: 200px; /* 보이는 높이를 200px로 설정 */
            border-radius: 6px;
            display: block; /* 중요! */
            touch-action: none;
        }
    </style>
</head>
<body>

    <h1>캔버스 리사이즈 독립 테스트</h1>
    <p>이 페이지에서 두 개의 패드가 모두 전체 영역에 그려진다면, 자바스크립트 코드는 정상이므로 다른 곳에서 원인을 찾아야 합니다.</p>

    <section class="form-section">
        <h2>테스트 영역</h2>
        <div class="form-group">
            <label>이름 패드 (name-pad)</label>
            <div class="signature-pad-container">
                <canvas id="name-pad"></canvas>
            </div>
        </div>
        <div class="form-group">
            <label>서명 패드 (signature-pad)</label>
            <div class="signature-pad-container">
                <canvas id="signature-pad"></canvas>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
    <script>
        // 필수 자바스크립트만 포함
        document.addEventListener('DOMContentLoaded', () => {
            console.log("테스트 스크립트 실행");

            const nameCanvas = document.getElementById('name-pad');
            const signatureCanvas = document.getElementById('signature-pad');

            function resizeCanvas() {
                console.log("--- 캔버스 리사이즈 시작 ---");
                const ratio = Math.max(window.devicePixelRatio || 1, 1);

                if (nameCanvas) {
                    nameCanvas.width = nameCanvas.offsetWidth * ratio;
                    nameCanvas.height = nameCanvas.offsetHeight * ratio;
                    nameCanvas.getContext("2d").scale(ratio, ratio);
                    console.log(`name-pad 리사이즈 완료: ${nameCanvas.width}x${nameCanvas.height}`);
                } else {
                    console.error("name-pad 요소를 찾을 수 없습니다!");
                }

                if (signatureCanvas) {
                    signatureCanvas.width = signatureCanvas.offsetWidth * ratio;
                    signatureCanvas.height = signatureCanvas.offsetHeight * ratio;
                    signatureCanvas.getContext("2d").scale(ratio, ratio);
                    console.log(`signature-pad 리사이즈 완료: ${signatureCanvas.width}x${signatureCanvas.height}`);
                } else {
                    console.error("signature-pad 요소를 찾을 수 없습니다!");
                }
            }

            resizeCanvas();

            const namePad = new SignaturePad(nameCanvas);
            const signaturePad = new SignaturePad(signatureCanvas);

            window.addEventListener("resize", () => {
                resizeCanvas();
                namePad.clear();
                signaturePad.clear();
            });
        });
    </script>
</body>
</html>